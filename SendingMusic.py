import jsonimport requestsimport timeclass SendingMusic:    def __init__(self, file_name):        self.file_name = file_name        self.headers = {"Content-Type": "application/json"}        self.url = "http://10.76.69.141:3000/push"        self.logs = []    def last_10(self):        return self.logs[len(self.logs) - 10:]    def various_logs(self):        count_logs = len(self.logs) % 11        if count_logs == 0:            count_logs += 1        i = 1        while i < len(self.logs):            if self.logs[i]['size'] == self.logs[i-1]['size']:                self.logs.pop(i-1)            else:                i += 1        if len(self.logs) > count_logs:            self.logs = self.logs[:count_logs]        return self.logs    def sum_logs(self):        count_logs = len(self.logs) % 11        if count_logs == 0:            count_logs += 1        a = len(self.logs) // count_logs        l = a * count_logs        del_ind = []        for i in range(0, l, a):            for j in range(i + 1, i + a):                del_ind.append(j)                self.logs[i]['amount'] += self.logs[j]['amount']                self.logs[i]['size'] += self.logs[j]['size']        for i in range(len(del_ind) - 1, 0, -1):            self.logs.pop(del_ind[i])        if len(self.logs) > count_logs:            self.logs = self.logs[:count_logs]        return self.logs    def sending(self, func):        times = -1        with open(self.file_name, 'r', encoding='utf-8') as file:            for line in file:                if line == '\n':                    continue                line_split = line.split('|')                if times != int(line_split[0]):                    if times != -1:                        if len(self.logs) != 0:                            requests.post(self.url, headers=self.headers, data=json.dumps(func()))                            print(func())                            time.sleep(1)                            self.logs = []                    times = int(line_split[0])                else:                    self.logs.append({                        "amount": len(self.logs),                        "code": int(line_split[3]),                        "size": int(line_split[4])                        })sms = [SendingMusic("log.txt"), SendingMusic("80.access.log"), SendingMusic("2016-11-17-08-00-00.log")]while True:    for sm in sms:        # sm.sending(sm.sum_logs)        sm.sending(sm.last_10)        # sm.sending(sm.various_logs)